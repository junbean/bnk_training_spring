<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.theater.dao.IPerformanceDao">
	<!-- 전체 공연 리스트 반환 -->
	<select id="getPerformanceList" resultType="com.example.theater.dto.PerformanceDTO">
		SELECT * FROM theater_performance
	</select>
	
	<select id="getPerformanceUpComingList" resultType="com.example.theater.dto.PerformanceDTO">
		SELECT * FROM theater_performance WHERE status LIKE 'UPCOMING'
	</select>
	
	<select id="getPerformanceOnGoingList" resultType="com.example.theater.dto.PerformanceDTO">
		SELECT * FROM theater_performance WHERE status LIKE 'ONGOING'
	</select>
	
	<select id="getPerformanceClosedList" resultType="com.example.theater.dto.PerformanceDTO">
		SELECT * FROM theater_performance WHERE status LIKE 'CLOSED'
	</select>
	
	
	
	<!-- 공연 객체 반환 -->
	<select id="getPerformanceById" resultType="com.example.theater.dto.PerformanceDTO">
    	SELECT * FROM theater_performance WHERE PERFORMANCE_ID = #{performanceId}
	</select>
	
	<!-- 공연 데이터 삽입 - 관리자만 가능 -->
	<insert id="insertPerformance">
		INSERT INTO theater_performance 
		VALUES(theater_performance_seq.NEXTVAL, #{p.title}, #{p.category}, #{p.description}, #{p.duration}, #{p.director}, #{p.cast}, #{p.rating}, #{p.price}, #{p.status})
	</insert>
</mapper>